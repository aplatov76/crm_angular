<div
  class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
  <h1 class="h2"></h1>
  <div class="btn-toolbar mb-2 mb-md-0">
    <div class="btn-group mr-2">
      <button type="button" class="btn btn-sm btn-outline-secondary" >Дерево категорий</button>
      <button type="button" class="btn btn-sm btn-outline-secondary" >Таблица</button>
    </div>
    <div class="btn-group mr-2">
      <button type="button" class="btn btn-sm btn-outline-secondary">Export xlsx</button>
      <button type="button" class="btn btn-sm btn-outline-secondary">Export pdf</button>
    </div>
  </div>
</div>
<ng-container> 
  <div class="d-flex header-dashboard justify-content-between">
    <h2>Прайс лист</h2>
    <i class="material-icons" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">filter_list</i>
  </div>

  <div class="collapse" id="collapseExample">
    <div class="card card-body">
        <div class="input-group mb-3">
            <div class="input-group-prepend">
              <button type="button" class="btn btn-outline-secondary">Поиск</button>
              <button type="button" class="btn btn-outline-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <span class="sr-only">Статус</span>
              </button>
              <div class="dropdown-menu">
                <a class="dropdown-item" href="#">Наименование</a>
                <a class="dropdown-item" href="#">Артикул</a>
                <a class="dropdown-item" href="#">Код</a>
              </div>
            </div>
            <input type="text" class="form-control" id="filter" #filter (keyup)="filterFn(filter.value, tree.treeModel)" placeholder="">
          </div>
    </div>
  </div>
      <tree-root #tree [nodes]="nodes" (activate)="onEvent($event, productComponent)">      
        <ng-template #treeNodeTemplate let-node let-index="index">
            <div *ngIf="!node.data.price" class="d-flex justify-content-between border-bottom border-top p-2" colspan="6">
              <h6>{{ node.data.title }}</h6>
              <div>
                <i class="material-icons pl-3 pr-1" (click)="openModal(productComponent, node.data.id)">playlist_add</i>
                <i class="material-icons">delete_sweep</i>
              </div>

            </div>
          
            <div *ngIf="node.data.price" class="d-flex justify-content-between border-bottom border-top p-2">
              <div  class="d-flex">
                <div class="pr-2">{{ node.data.id }}</div>
                <div >{{ node.data.title }}</div>
              </div>
              <div id="table">
                <div  class="tr ">
                  <div class="td pr-2 position-relative">
                    <span>{{ node.data.articul }}</span>
                    <small class="text-muted position-absolute position">Артикул</small>
                  </div>
                  <div class="td pr-2 position-relative">
                    <span>{{ node.data.stock }}</span>
                    <small class="text-muted position-absolute position">Склад</small>
                  </div>
                  <div class="td pr-2 position-relative" >
                    <span>{{ (node.data.trade_price).toFixed(2) }}</span>
                    <small class="text-muted position-absolute position">Цена</small>
                  </div>
                  <div class="td pr-2 position-relative" >
                    <span>{{ (node.data.price).toFixed(2) }}</span>
                    <small class="text-muted position-absolute position">Цена СМ</small>
                  </div>
                </div>
              </div>


            </div>
        </ng-template>
      </tree-root>


  </ng-container>

  <ng-template #productComponent>
    <product-component id={{selectedProduct}}></product-component>
  </ng-template>